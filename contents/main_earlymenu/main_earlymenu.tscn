[gd_scene load_steps=4 format=3 uid="uid://b6boxed5w0ujx"]

[ext_resource type="Theme" uid="uid://cql86uwxm36wp" path="res://contents/main_earlymenu/theme.tres" id="1_kq37u"]
[ext_resource type="Script" uid="uid://ubiqiglpve8g" path="res://contents/main_earlymenu/main_earlymenu.gd" id="2_tekc0"]
[ext_resource type="Texture2D" uid="uid://beu0pefh5ovbs" path="res://contents/main_earlymenu/welcome_picture_0.jpg" id="3_x8ole"]

[node name="Main_EarlyMenu" type="PanelContainer"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("1_kq37u")
script = ExtResource("2_tekc0")

[node name="TabContainer" type="TabContainer" parent="."]
layout_mode = 2
theme = ExtResource("1_kq37u")
tab_alignment = 1
current_tab = 2
tab_focus_mode = 0

[node name="Welcome" type="VBoxContainer" parent="TabContainer"]
visible = false
layout_mode = 2
metadata/_tab_index = 0

[node name="TextureRect" type="TextureRect" parent="TabContainer/Welcome"]
layout_mode = 2
size_flags_vertical = 3
texture = ExtResource("3_x8ole")
expand_mode = 1
stretch_mode = 6

[node name="ContinueButton" type="Button" parent="TabContainer/Welcome"]
layout_mode = 2
mouse_default_cursor_shape = 2
text = "继续"

[node name="EULA" type="VBoxContainer" parent="TabContainer"]
visible = false
layout_mode = 2
metadata/_tab_index = 1

[node name="MarginContainer" type="MarginContainer" parent="TabContainer/EULA"]
layout_mode = 2
size_flags_vertical = 3
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="RichTextLabel" type="RichTextLabel" parent="TabContainer/EULA/MarginContainer"]
layout_mode = 2
size_flags_vertical = 3
theme = ExtResource("1_kq37u")
bbcode_enabled = true
text = "[center]百川HUB(早期实验版-PDA主题)使用协议[/center]

以下将百川HUB(早期实验版-PDA主题)称为\"本程序\"。
请在继续使用本程序前仔细阅读本协议，请您在已完全同意本协议后再点击\"我已阅读并同意该协议\"按钮。若您不同意本协议，请勿使用本程序。

一，开源协议
本程序源代码按照GPL-3.0(GNU General Public License v3.0)协议开源，本协议在其基础上补充对本程序的权利与责任划定，本协议未提到的部分继续遵循GPL-3.0。
源码仓库URL：https://github.com/bocai-bca/BaiChuanHUB

二，免责声明
本程序属于仍需经历测试检验的早期实验版，开发方尚不能保证其能正常无误地运行，且鉴于其的开源性质和其遵循的开源协议，本协议在此声明：对于您因运行本程序而获得的任何损失，如数据错误、数据丢失、硬件损坏等，无论损失的造成原因是本程序按开发方的设计正常运行(含恶意意图的除外)、开发方开发过程中失误(如代码存在编译前可见的错误或代码将进行的行为在客观上不符合开发方设计)，或是开发方存在设计失误以致引发问题(开发方的设计不适用于实际情况或存在疏忽、纰漏)，还是以超出了开发方预期的方式运行(即发生意外的错误)，开发方都无需承担任何责任、无需对您进行任何赔偿。
同意本协议意味着您同意/接受该免责声明，且每次使用本程序都需要您同意一次该免责声明，您的每次同意可仅对该次使用生效。

三，与百川归海的关系
\"百川归海\"是游戏《深海迷航》(Subnautica)的社区模组整合包，本程序开发方与\"百川归海\"的制作团队是合作关系，而本程序与\"百川归海\"是各自独立的项目，即合作但没有从属关系。当任意一方的项目发生问题时，问题的讨论、判定、追责范围将限制于该方，而不扩散到对方。

四，修改和再分发(本条目始终生效，即使您未在使用本程序发行版)
对于源代码，您拥有GPL-3.0协议给予的所有相关权利，但您不得以具有显式或隐式的收费门槛的形式发行源代码。
对于发行版，无论是本协议包含于的本程序发行版文件，还是您使用源代码(包括基于源代码的修改版本)自行编译(导出)的发行版，您均不得以包括您和本程序开发方在内的任何个人、团队、组织的名义进行任何形式的分发。发行版只有本程序开发方和开发方合作对象，和取得了两者任意一方直接许可的对象有权利分发，该许可是不可转让的。
尽管允许您再分发源代码，但在技术角度您仍然不得通过特殊手法使源代码可以不经本程序开发方发行的发行版相同方式的编译(导出)操作就可直接被他人运行，尤其是他人并不知道您修改了源代码的情况。此种情景下，您即使只分发了源代码，也将被视为分发了发行版。
如果您违反了本条协议，本程序开发方和开发方合作对象有权利依您对我们造成的金钱、精神损失程度追究责任和索赔。

上次修订：2025年9月3日"

[node name="AgreeButtonBar" type="HBoxContainer" parent="TabContainer/EULA"]
layout_mode = 2

[node name="RejectButton" type="Button" parent="TabContainer/EULA/AgreeButtonBar"]
layout_mode = 2
size_flags_horizontal = 3
mouse_default_cursor_shape = 2
text = "不同意该协议并退出"

[node name="AgreeButton" type="Button" parent="TabContainer/EULA/AgreeButtonBar"]
layout_mode = 2
size_flags_horizontal = 3
mouse_default_cursor_shape = 2
text = "我已阅读并同意该协议"

[node name="Launcher" type="VBoxContainer" parent="TabContainer"]
layout_mode = 2
metadata/_tab_index = 2

[node name="UnavailableText" type="Label" parent="TabContainer/Launcher"]
layout_mode = 2
size_flags_vertical = 6
text = "无法使用启动器
未在百川HUB相同位置找到游戏本体包或解析失败"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Installer" type="ScrollContainer" parent="TabContainer"]
visible = false
layout_mode = 2
metadata/_tab_index = 3

[node name="MarginContainer" type="MarginContainer" parent="TabContainer/Installer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 16
theme_override_constants/margin_top = 16
theme_override_constants/margin_right = 16
theme_override_constants/margin_bottom = 16

[node name="VBoxContainer" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer"]
layout_mode = 2

[node name="GameLocation" type="HBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="TextGameLocation" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation"]
layout_mode = 2
text = "游戏可执行文件位置"
vertical_alignment = 1

[node name="LineEditGameLocation" type="LineEdit" parent="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation"]
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = ".../Subnautica/Subnautica.exe"
context_menu_enabled = false
caret_blink = true
caret_blink_interval = 0.3

[node name="AutoFindButton" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation"]
layout_mode = 2
size_flags_stretch_ratio = 0.5
mouse_default_cursor_shape = 2
text = "自动寻找"

[node name="GameTipText" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer"]
modulate = Color(1, 1, 0, 1)
clip_contents = true
layout_mode = 2
theme_override_font_sizes/font_size = 24
text = "  "
vertical_alignment = 1

[node name="ModPackLocation" type="HBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="TextPackLocation" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation"]
layout_mode = 2
text = "百川安装包位置"

[node name="LineEditPackLocation" type="LineEdit" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation"]
layout_mode = 2
size_flags_horizontal = 3
mouse_default_cursor_shape = 8
placeholder_text = ".../百川归海x.x.x安装包.zip"
context_menu_enabled = false
emoji_menu_enabled = false
caret_blink = true
caret_blink_interval = 0.3

[node name="OpenZIPButton" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation"]
layout_mode = 2
mouse_default_cursor_shape = 8
disabled = true
text = "解压并加载"

[node name="ModPackTipText" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer"]
modulate = Color(0, 1, 0, 1)
clip_contents = true
layout_mode = 2
theme_override_font_sizes/font_size = 24
clip_text = true

[node name="ConsolePanel" type="HBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
alignment = 1

[node name="InstallInfo" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.5

[node name="PanelTitle" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/InstallInfo"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "状态"
horizontal_alignment = 1

[node name="Info" type="RichTextLabel" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/InstallInfo"]
visible = false
layout_mode = 2
size_flags_vertical = 3
bbcode_enabled = true
text = "游戏版本验证
[right][/right]
BepInEx存在迹象
[right][/right]
QMods存在迹象
[right][/right]
百川安装状况
[right][/right]"
scroll_active = false
autowrap_mode = 0

[node name="Refresh" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/InstallInfo"]
visible = false
layout_mode = 2
mouse_default_cursor_shape = 2
text = "刷新"

[node name="GameNotFound" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/InstallInfo"]
layout_mode = 2
size_flags_vertical = 6
text = "未指定游戏位置"
horizontal_alignment = 1
vertical_alignment = 1

[node name="OperationSelect" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="PanelTitle" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "操作"
horizontal_alignment = 1

[node name="OperationTabs" type="TabContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect"]
layout_mode = 2
size_flags_vertical = 3
tab_alignment = 1
current_tab = 0
tab_focus_mode = 0

[node name="Install" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs"]
layout_mode = 2
metadata/_tab_index = 0

[node name="Spacing" type="Control" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install"]
layout_mode = 2

[node name="ReinstallCheck" type="CheckBox" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install" groups=["InstallOperatingNodes"]]
clip_contents = true
layout_mode = 2
mouse_default_cursor_shape = 2
text = "覆盖现有安装(更新|换难度)"
expand_icon = true

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install" groups=["InstallOperatingNodes"]]
layout_mode = 2
size_flags_vertical = 3

[node name="DifficultContainer" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Difficults" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/DifficultContainer"]
layout_mode = 2
text = "难度"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ScrollContainer" type="ScrollContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/DifficultContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="DifficultsNodesContainer" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/DifficultContainer/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="AddonsContainer" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 1.75

[node name="AddonPacks" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/AddonsContainer"]
layout_mode = 2
text = "附属包"
horizontal_alignment = 1

[node name="ScrollContainer" type="ScrollContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/AddonsContainer"]
layout_mode = 2
size_flags_vertical = 3

[node name="AddonsNodesContainer" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/HBoxContainer/AddonsContainer/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ConfirmInstall" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install" groups=["InstallOperatingNodes"]]
clip_contents = true
layout_mode = 2
mouse_default_cursor_shape = 8
disabled = true
text = "请先设置游戏位置以确定安装位置"

[node name="ModPackNotFound" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install"]
visible = false
clip_contents = true
layout_mode = 2
size_flags_vertical = 3
text = "未加载安装包"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Uninstall" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs"]
visible = false
layout_mode = 2
metadata/_tab_index = 1

[node name="Spacing" type="Control" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Uninstall"]
layout_mode = 2

[node name="CheckBox" type="CheckBox" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Uninstall"]
clip_contents = true
layout_mode = 2
mouse_default_cursor_shape = 2
text = "保留BepInEx和QMods前置"

[node name="ConfirmUninstall" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Uninstall"]
clip_contents = true
layout_mode = 2
size_flags_vertical = 3
mouse_default_cursor_shape = 8
disabled = true
text = "卸载
不可用"

[node name="FileVerify" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs"]
visible = false
layout_mode = 2
metadata/_tab_index = 2

[node name="Spacing" type="Control" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/FileVerify"]
layout_mode = 2

[node name="BlockTipText" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/FileVerify"]
visible = false
clip_contents = true
layout_mode = 2
size_flags_vertical = 3
text = "未加载安装包"
horizontal_alignment = 1
vertical_alignment = 1

[node name="StartVerify" type="Button" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/FileVerify"]
clip_contents = true
layout_mode = 2
size_flags_vertical = 3
mouse_default_cursor_shape = 8
disabled = true
text = "校验整合包完整性
(仅适用于已安装当前选定安装包的情形)

此功能还没做"

[node name="Log" type="VBoxContainer" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 0.5

[node name="PanelTitle" type="Label" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/Log"]
layout_mode = 2
theme_override_font_sizes/font_size = 48
text = "日志"
horizontal_alignment = 1

[node name="LogText" type="RichTextLabel" parent="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/Log"]
layout_mode = 2
size_flags_vertical = 3
focus_mode = 2
mouse_default_cursor_shape = 1
theme_override_font_sizes/normal_font_size = 20
theme_override_font_sizes/bold_font_size = 20
theme_override_font_sizes/bold_italics_font_size = 20
theme_override_font_sizes/italics_font_size = 20
theme_override_font_sizes/mono_font_size = 20
bbcode_enabled = true
scroll_following = true
autowrap_mode = 1
selection_enabled = true
drag_and_drop_selection_enabled = false

[node name="Docs" type="VBoxContainer" parent="TabContainer"]
visible = false
layout_mode = 2
metadata/_tab_index = 4

[node name="InfoText" type="Label" parent="TabContainer/Docs"]
layout_mode = 2
horizontal_alignment = 1

[node name="HBoxContainer" type="HBoxContainer" parent="TabContainer/Docs"]
layout_mode = 2
size_flags_vertical = 3

[node name="SideList" type="VBoxContainer" parent="TabContainer/Docs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3

[node name="Tree" type="Tree" parent="TabContainer/Docs/HBoxContainer/SideList"]
visible = false
layout_mode = 2
size_flags_vertical = 3
allow_reselect = true
allow_search = false

[node name="Search" type="VBoxContainer" parent="TabContainer/Docs/HBoxContainer/SideList"]
layout_mode = 2
size_flags_vertical = 3

[node name="SearchLineEdit" type="LineEdit" parent="TabContainer/Docs/HBoxContainer/SideList/Search"]
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "搜索关键词(使用空格分隔)"
context_menu_enabled = false
select_all_on_focus = true

[node name="ObjectList" type="ScrollContainer" parent="TabContainer/Docs/HBoxContainer/SideList/Search"]
layout_mode = 2
size_flags_vertical = 3

[node name="HBox" type="VBoxContainer" parent="TabContainer/Docs/HBoxContainer/SideList/Search/ObjectList"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="TextView" type="RichTextLabel" parent="TabContainer/Docs/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_stretch_ratio = 2.0
bbcode_enabled = true

[node name="PackNotLoaded" type="Label" parent="TabContainer/Docs"]
visible = false
layout_mode = 2
size_flags_vertical = 6
text = "未加载安装包"
horizontal_alignment = 1

[connection signal="pressed" from="TabContainer/Welcome/ContinueButton" to="." method="welcome_continue"]
[connection signal="pressed" from="TabContainer/EULA/AgreeButtonBar/RejectButton" to="." method="eula_reject"]
[connection signal="pressed" from="TabContainer/EULA/AgreeButtonBar/AgreeButton" to="." method="eula_agree"]
[connection signal="focus_exited" from="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation/LineEditGameLocation" to="." method="installer_gamepath_lose_focus"]
[connection signal="text_submitted" from="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation/LineEditGameLocation" to="." method="installer_gamepath_submit"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/GameLocation/AutoFindButton" to="." method="installer_auto_find_game"]
[connection signal="focus_exited" from="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation/LineEditPackLocation" to="." method="installer_packpath_lose_focus"]
[connection signal="text_submitted" from="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation/LineEditPackLocation" to="." method="installer_packpath_submit"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ModPackLocation/OpenZIPButton" to="." method="installer_unpack_and_load_install_pack"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/InstallInfo/Refresh" to="." method="installer_state_refresh"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/ReinstallCheck" to="." method="installer_install_reinstall_checkbox"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Install/ConfirmInstall" to="." method="installer_install_confirm"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/Uninstall/ConfirmUninstall" to="." method="installer_uninstall_confirm"]
[connection signal="pressed" from="TabContainer/Installer/MarginContainer/VBoxContainer/ConsolePanel/OperationSelect/OperationTabs/FileVerify/StartVerify" to="." method="installer_verify_start"]
